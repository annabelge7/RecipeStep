{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/annabeledwards/Desktop/FullStack/project2/project-2-recipe-step-tracker-v2-annabelge7/frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject;import Button from\"./Button\";import React,{useState}from\"react\";import RecipeStep from\"./RecipeStep\";import{useMutation,gql}from\"@apollo/client\";import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const UPDATE_RECIPE_STEP=gql(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  mutation UpdateRecipeStep($id: ID!, $step: String!) {\\n    updateRecipeStep(data: { id: $id, step: $step }) {\\n      id\\n      step\\n      completed\\n    }\\n  }\\n\"])));export default function Update(_ref){let{id,startStep,completed}=_ref;const[step,setStep]=useState(\"\");// const [input, setInput] = useState(\"\");\nconst[updateRecipeStep,{loading,error}]=useMutation(UPDATE_RECIPE_STEP,{variables:{id}});const handleUpdate=async e=>{console.log(e);e.preventDefault();if(!step)return;try{const{data}=await updateRecipeStep({variables:{id,step},optimisticResponse:{updateRecipeStep:{__typename:\"RecipeStep\",id:id,step:step,completed:completed}}});setStep(\"\");}catch(error){console.error(\"failed update step\",error);}};if(error)return/*#__PURE__*/_jsxs(\"p\",{children:[\"error: \",error.message]});if(loading)return\"Loading...\";return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:step,onChange:e=>setStep(e.target.value),placeholder:\"Edit Step\",className:\"p-2\"}),\" \",/*#__PURE__*/_jsx(Button,{text:\"Apply Edit\",color:\"lightgreen\",onClick:e=>handleUpdate(e)})]});}","map":{"version":3,"names":["Button","React","useState","RecipeStep","useMutation","gql","jsxs","_jsxs","jsx","_jsx","UPDATE_RECIPE_STEP","_templateObject","_taggedTemplateLiteral","Update","_ref","id","startStep","completed","step","setStep","updateRecipeStep","loading","error","variables","handleUpdate","e","console","log","preventDefault","data","optimisticResponse","__typename","children","message","type","value","onChange","target","placeholder","className","text","color","onClick"],"sources":["/Users/annabeledwards/Desktop/FullStack/project2/project-2-recipe-step-tracker-v2-annabelge7/frontend/src/Update.js"],"sourcesContent":["import Button from \"./Button\";\nimport React, { useState } from \"react\";\nimport RecipeStep from \"./RecipeStep\";\nimport { useMutation, gql } from \"@apollo/client\";\n\nconst UPDATE_RECIPE_STEP = gql`\n  mutation UpdateRecipeStep($id: ID!, $step: String!) {\n    updateRecipeStep(data: { id: $id, step: $step }) {\n      id\n      step\n      completed\n    }\n  }\n`;\n\nexport default function Update({ id, startStep, completed }) {\n  const [step, setStep] = useState(\"\");\n  // const [input, setInput] = useState(\"\");\n  const [updateRecipeStep, { loading, error }] = useMutation(\n    UPDATE_RECIPE_STEP,\n    {\n      variables: { id },\n    }\n  );\n\n  const handleUpdate = async (e) => {\n    console.log(e);\n    e.preventDefault();\n    if (!step) return;\n\n    try {\n      const { data } = await updateRecipeStep({\n        variables: { id, step },\n        optimisticResponse: {\n          updateRecipeStep: {\n            __typename: \"RecipeStep\",\n            id: id,\n            step: step,\n            completed: completed,\n          },\n        },\n      });\n      setStep(\"\");\n    } catch (error) {\n      console.error(\"failed update step\", error);\n    }\n  };\n\n  if (error) return <p>error: {error.message}</p>;\n  if (loading) return \"Loading...\";\n  return (\n    <div>\n      <input\n        type=\"text\"\n        value={step}\n        onChange={(e) => setStep(e.target.value)}\n        placeholder=\"Edit Step\"\n        className=\"p-2\"\n      />{\" \"}\n      <Button\n        text=\"Apply Edit\"\n        color=\"lightgreen\"\n        onClick={(e) => handleUpdate(e)}\n      />\n    </div>\n  );\n}\n"],"mappings":"+NAAA,MAAO,CAAAA,MAAM,KAAM,UAAU,CAC7B,MAAO,CAAAC,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,CAAAC,UAAU,KAAM,cAAc,CACrC,OAASC,WAAW,CAAEC,GAAG,KAAQ,gBAAgB,CAAC,OAAAC,IAAA,IAAAC,KAAA,CAAAC,GAAA,IAAAC,IAAA,yBAElD,KAAM,CAAAC,kBAAkB,CAAGL,GAAG,CAAAM,eAAA,GAAAA,eAAA,CAAAC,sBAAA,8KAQ7B,CAED,cAAe,SAAS,CAAAC,MAAMA,CAAAC,IAAA,CAA+B,IAA9B,CAAEC,EAAE,CAAEC,SAAS,CAAEC,SAAU,CAAC,CAAAH,IAAA,CACzD,KAAM,CAACI,IAAI,CAAEC,OAAO,CAAC,CAAGjB,QAAQ,CAAC,EAAE,CAAC,CACpC;AACA,KAAM,CAACkB,gBAAgB,CAAE,CAAEC,OAAO,CAAEC,KAAM,CAAC,CAAC,CAAGlB,WAAW,CACxDM,kBAAkB,CAClB,CACEa,SAAS,CAAE,CAAER,EAAG,CAClB,CACF,CAAC,CAED,KAAM,CAAAS,YAAY,CAAG,KAAO,CAAAC,CAAC,EAAK,CAChCC,OAAO,CAACC,GAAG,CAACF,CAAC,CAAC,CACdA,CAAC,CAACG,cAAc,CAAC,CAAC,CAClB,GAAI,CAACV,IAAI,CAAE,OAEX,GAAI,CACF,KAAM,CAAEW,IAAK,CAAC,CAAG,KAAM,CAAAT,gBAAgB,CAAC,CACtCG,SAAS,CAAE,CAAER,EAAE,CAAEG,IAAK,CAAC,CACvBY,kBAAkB,CAAE,CAClBV,gBAAgB,CAAE,CAChBW,UAAU,CAAE,YAAY,CACxBhB,EAAE,CAAEA,EAAE,CACNG,IAAI,CAAEA,IAAI,CACVD,SAAS,CAAEA,SACb,CACF,CACF,CAAC,CAAC,CACFE,OAAO,CAAC,EAAE,CAAC,CACb,CAAE,MAAOG,KAAK,CAAE,CACdI,OAAO,CAACJ,KAAK,CAAC,oBAAoB,CAAEA,KAAK,CAAC,CAC5C,CACF,CAAC,CAED,GAAIA,KAAK,CAAE,mBAAOf,KAAA,MAAAyB,QAAA,EAAG,SAAO,CAACV,KAAK,CAACW,OAAO,EAAI,CAAC,CAC/C,GAAIZ,OAAO,CAAE,MAAO,YAAY,CAChC,mBACEd,KAAA,QAAAyB,QAAA,eACEvB,IAAA,UACEyB,IAAI,CAAC,MAAM,CACXC,KAAK,CAAEjB,IAAK,CACZkB,QAAQ,CAAGX,CAAC,EAAKN,OAAO,CAACM,CAAC,CAACY,MAAM,CAACF,KAAK,CAAE,CACzCG,WAAW,CAAC,WAAW,CACvBC,SAAS,CAAC,KAAK,CAChB,CAAC,CAAC,GAAG,cACN9B,IAAA,CAACT,MAAM,EACLwC,IAAI,CAAC,YAAY,CACjBC,KAAK,CAAC,YAAY,CAClBC,OAAO,CAAGjB,CAAC,EAAKD,YAAY,CAACC,CAAC,CAAE,CACjC,CAAC,EACC,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}